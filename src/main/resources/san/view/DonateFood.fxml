<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="600.0" prefWidth="900.0" styleClass="donate-page" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="san.view.DonateFoodController">

    <!-- Donation Cart (Right Side) -->
    <right>
        <VBox prefHeight="600.0" prefWidth="350.0" spacing="16" styleClass="donation-cart" BorderPane.alignment="CENTER">
            <BorderPane.margin>
                <Insets bottom="20" right="20" top="20" />
            </BorderPane.margin>

            <!-- Cart Header -->
            <Label styleClass="donation-cart-title" text="Your Donation Cart" />

            <!-- Cart Table -->
            <TableView fx:id="cartTable" prefWidth="350.0" styleClass="cart-table">
                <columns>
                    <TableColumn fx:id="foodColumn" prefWidth="120.0" text="Food Item" />
                    <TableColumn fx:id="quantityColumn" prefWidth="80.0" text="Qty" />
                    <TableColumn fx:id="priceColumn" prefWidth="90.0" text="Price" />
                </columns>
            <columnResizePolicy>
               <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
            </columnResizePolicy>
            </TableView>

            <!-- Total Section -->
            <VBox spacing="8" styleClass="total-price">
                <HBox alignment="CENTER_RIGHT" spacing="12">
                    <Pane HBox.hgrow="ALWAYS" />
                    <Label styleClass="h2" text="Total:" />
                    <Label fx:id="totalLabel" styleClass="total-amount" text="RM 0.00" />
                </HBox>
            </VBox>

            <!-- Action Buttons -->
            <VBox alignment="CENTER" spacing="12">
                <HBox alignment="CENTER" spacing="12">
                    <Button onAction="#handleDelete" prefWidth="120.0" styleClass="btn-secondary" text="Delete" />
                    <Button onAction="#handleEdit" prefWidth="120.0" styleClass="btn-secondary" text="Edit" />
                </HBox>

                <Button fx:id="proceedBtn" onAction="#handleProceed" prefWidth="280.0" styleClass="btn-cta" text="PROCEED TO PAYMENT" />
            </VBox>
        </VBox>
    </right>

    <!-- Food Selection Area (Center) -->
    <center>
        <VBox spacing="16" styleClass="food-grid" BorderPane.alignment="CENTER">
            <BorderPane.margin>
                <Insets bottom="20" left="20" right="20" top="20" />
            </BorderPane.margin>

            <!-- Header and Search -->
            <VBox spacing="12">
                <Label styleClass="section-title" text="Select Food Items to Donate" />
                <TextField fx:id="searchField" prefWidth="400.0" prefHeight="30.0" promptText="Search for food items (e.g., apple)..." styleClass="search-field" />
            </VBox>

            <!-- Food Items Grid -->
            <ScrollPane fitToWidth="true" prefHeight="450.0" style="-fx-background: transparent; -fx-background-color: transparent;">
                <content>
                    <FlowPane fx:id="foodGrid" alignment="TOP_CENTER" columnHalignment="CENTER" hgap="16.0" prefWrapLength="480.0" style="-fx-background-color: transparent;" vgap="16.0" />
                </content>
            </ScrollPane>
        </VBox>
    </center>

    <!-- Optional: Instructions Panel (Top) -->
    <top>
        <VBox spacing="8" styleClass="card" BorderPane.alignment="CENTER">
            <BorderPane.margin>
                <Insets left="20" right="20" top="20" />
            </BorderPane.margin>

            <Label styleClass="h3" text="How It Works" />
            <Label styleClass="body-text" text="1. Browse available food items below  •  2. Add items to your cart  •  3. Review your donation  •  4. Proceed to payment" wrapText="true" />
        </VBox>
    </top>
</BorderPane>
